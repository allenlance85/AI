import tkinter as tk
import openai


# Load OpenAI API key from environment variable
openai.api_key = "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"

# Define GPT-3 prompt with persona text
model_engine = "text-davinci-002"
persona = """
Name: 
Age: 
Occupation: 
Location: 
Hobbies: 
Education: 
Personality Traits: 
"""
prompt = f"Create a persona for OpenAI's GPT-3:\n{persona}\n"

# Define function to call GPT-3 API and display response
def generate_personality():
    # Get persona text from user input
    persona_text = persona_entry.get("1.0", "end-1c")
    
    # Update GPT-3 prompt with persona text
    prompt = f"Create a persona for OpenAI's GPT-3:\n{persona_text}\n"
    
    # Call GPT-3 API to generate response
    try:
        completions = openai.Completion.create(
            engine=model_engine,
            prompt=prompt,
            max_tokens=1024,
            n=1,
            stop=None,
            temperature=0.5,
            frequency_penalty=0,
            presence_penalty=0,
        )
        response = completions.choices[0].text.strip()
        response_text.config(state="normal")
        response_text.delete("1.0", "end")
        response_text.insert("end", response)
        response_text.config(state="disabled")
    except Exception as e:
        response_text.config(state="normal")
        response_text.delete("1.0", "end")
        response_text.insert("end", f"Error: {e}")
        response_text.config(state="disabled")

# Create GUI window
window = tk.Tk()
window.title("GPT-3 Persona Generator")

# Create input label and text box for persona
persona_label = tk.Label(window, text="Enter persona text:")
persona_label.pack()
persona_entry = tk.Text(window, width=50, height=10)
persona_entry.pack()

# Create button to generate personality
generate_button = tk.Button(window, text="Generate Personality", command=generate_personality)
generate_button.pack()

# Create output label and text box for GPT-3 response
response_label = tk.Label(window, text="GPT-3 Response:")
response_label.pack()
response_text = tk.Text(window, width=50, height=10, state="disabled")
response_text.pack()

# Start GUI loop
window.mainloop()
